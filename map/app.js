!function(t){function e(e){for(var o,r,a=e[0],l=e[1],d=e[2],c=0,h=[];c<a.length;c++)r=a[c],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);for(u&&u(e);h.length;)h.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},s={1:0},i=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var d=0;d<a.length;d++)e(a[d]);var u=l;i.push([5,0,2]),n()}({5:function(t,e,n){t.exports=n(6)},6:function(t,e,n){"use strict";n.r(e);var o=n(0),s=n(1);var i=[function(t,e,n){return(n?":host{display:block;height:100%}":t+"{display:block;height:100%}")+".link"+e+"{border:none;padding:10px;border-radius:5px;text-decoration:none;background-color:#ff6000;color:#fff;margin-left:33%;margin-right:33%;display:inline-block;margin-top:1em}.info"+e+"{color:#000;background-color:#e4f2f8;margin:auto;padding:15px 10px;text-align:left;width:300px;border-radius:5px}.code"+e+"{font-family:monospace;font-size:large}.container"+e+"{margin-top:30px}img"+e+"{max-width:150px}.greeting"+e+"{height:75px}section"+e+"{padding:1rem;margin:1rem;background:#fff;border-radius:.5rem;box-shadow:0 1px 4px rgba(0,0,0,.2)}section"+e+" h2"+e+"{margin:0 0 .5rem;font-weight:400}"}];var r=[function(t,e,n){return(n?":host{display:block;height:100vh;background-color:#fff;background-image:url(resources/tiles/paper-dots.svg);background-repeat:repeat;box-shadow:0 0 .5rem rgba(0,0,0,.3)}":t+"{display:block;height:100vh;background-color:#fff;background-image:url(resources/tiles/paper-dots.svg);background-repeat:repeat;box-shadow:0 0 .5rem rgba(0,0,0,.3)}")+"div"+e+"{position:absolute;width:4rem;height:4rem;cursor:default}"}];function a(t,e,n,o){const{s:s,h:i}=t;return[i("div",{key:1},[s("",{key:0},[],n)])]}var l=Object(o.registerTemplate)(a);a.slots=[""],a.stylesheets=[],r&&a.stylesheets.push.apply(a.stylesheets,r),a.stylesheetTokens={hostAttribute:"map-world-_world-host",shadowAttribute:"map-world-_world"};class d extends o.LightningElement{constructor(...t){super(...t),this.world=null}renderedCallback(){window.addEventListener("resize",this.resize.bind(this)),this.resize()}resize(){const t=this.template.childNodes[1];t.style.left=`${Math.floor((window.innerWidth-64)/2)}px`,t.style.top=`${Math.floor((window.innerHeight-64)/2)}px`;var e=t.getBoundingClientRect();const n=this.template.host,o=Math.floor((e.left+window.scrollX)%64),s=Math.floor((e.top+window.scrollY)%64);n.style.backgroundPositionX=`${o}px`,n.style.backgroundPositionY=`${s}px`}}Object(o.registerDecorators)(d,{publicProps:{world:{config:0}}});var u=Object(o.registerComponent)(d,{tmpl:l});var c=[function(t,e,n){return(n?":host{position:absolute;top:0;left:0}":t+"{position:absolute;top:0;left:0}")+"button"+e+"{position:relative;padding:0;width:4.5rem;height:4.5rem;margin:-.25rem;outline:none;background:transparent;background-clip:content-box;border:.25rem solid transparent;cursor:inherit}button:hover"+e+"{border-color:#fff;position:relative;z-index:1;box-shadow:0 0 10px rgba(0,0,0,.6);border-radius:4px}button"+e+" img"+e+"{position:absolute;top:0;left:0}"}];var h=[function(t,e,n){return".opened"+e+"{display:block}.closed"+e+"{display:inline-block}"}];function m(t,e,n,o){const{b:s,s:i}=t,{_m0:r,_m1:a}=o;return[i("",{key:0,on:{slotchange:r||(o._m0=s(e.handleSlotChange))}},[],n),i("menu",{attrs:{name:"menu"},key:1,on:{slotchange:a||(o._m1=s(e.handleMenuSlotChange))}},[],n)]}var p=Object(o.registerTemplate)(m);m.slots=["","menu"],m.stylesheets=[],h&&m.stylesheets.push.apply(m.stylesheets,h),m.stylesheetTokens={hostAttribute:"map-contextMenu-_contextMenu-host",shadowAttribute:"map-contextMenu-_contextMenu"};var g=n(4);class b extends o.LightningElement{constructor(){super(),this.$menu=null,this.$menuFocus=!1,this.contextMenuHandler=this.handleContextMenu.bind(this),this.mouseDownHandler=this.handleMouseDown.bind(this)}handleContextMenu(t){document.addEventListener("mousedown",this.mouseDownHandler);new g.a(function(t){return{clientWidth:0,clientHeight:0,getBoundingClientRect(){const e=t.clientX,n=t.clientY;return{width:0,height:0,top:n,bottom:n,left:e,right:e}}}}(t),this.$menu,{placement:"bottom-start",modifiers:{applyStyle:{enabled:!1},applyReactStyle:{enabled:!0,fn:t=>{for(let e in t.styles)this.$menu.style[e]=t.styles[e];this.$menu.style.zIndex="1",this.$menu.style.position="fixed",this.$menu.style.display="initial"},order:900}}}),t.preventDefault()}handleMouseDown(t){this.$menuFocus||(this.$menu.style.display="none",document.removeEventListener("mousedown",this.mouseDownHandler))}handleSlotChange(t){this.template.childNodes[1].assignedElements().forEach(t=>{t.addEventListener("contextmenu",this.contextMenuHandler)})}handleMenuSlotChange(t){const e=this.template.childNodes[2].assignedElements();if(0===e.length)throw new Error("contextMenu missing menu slot.");if(e.length>1)throw new Error("contextMenu must only contain one root element in the menu slot.");const n=e[0];n.style.display="none",n.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),n.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),n.addEventListener("click",this.handleMouseClick.bind(this)),this.$menu=n}handleMouseEnter(){this.$menuFocus=!0}handleMouseLeave(){this.$menuFocus=!1}handleMouseClick(){this.$menu.style.display="none",document.removeEventListener("mousedown",this.mouseDownHandler)}}Object(o.registerDecorators)(b,{fields:["$menu","$menuFocus"]});var f=Object(o.registerComponent)(b,{tmpl:p});var v=[function(t,e,n){return n?":host{display:flex;flex-direction:column;border:1px solid #ddd;background:#fff;border-radius:.25rem;box-shadow:0 0 1rem rgba(0,0,0,.3)}":t+"{display:flex;flex-direction:column;border:1px solid #ddd;background:#fff;border-radius:.25rem;box-shadow:0 0 1rem rgba(0,0,0,.3)}"}];function y(t,e,n,o){const{s:s}=t;return[s("",{key:0},[],n)]}var k=Object(o.registerTemplate)(y);y.slots=[""],y.stylesheets=[],v&&y.stylesheets.push.apply(y.stylesheets,v),y.stylesheetTokens={hostAttribute:"map-menu-_menu-host",shadowAttribute:"map-menu-_menu"};var x=Object(o.registerComponent)(class extends o.LightningElement{},{tmpl:k});var w=[function(t,e,n){return(n?":host{display:flex}":t+"{display:flex}")+"button"+e+"{border:0;background:#fff;color:#444;padding:.75rem 1.25rem}button:hover"+e+"{background:#eee}"}];function C(t,e,n,o){const{s:s,h:i}=t;return[i("button",{key:1},[s("",{key:0},[],n)])]}var T=Object(o.registerTemplate)(C);C.slots=[""],C.stylesheets=[],w&&C.stylesheets.push.apply(C.stylesheets,w),C.stylesheetTokens={hostAttribute:"map-menuItem-_menuItem-host",shadowAttribute:"map-menuItem-_menuItem"};var E=Object(o.registerComponent)(class extends o.LightningElement{},{tmpl:T});function _(t,e,n,o){const{k:s,h:i,i:r,b:a,t:l,c:d}=t,{_m0:u,_m1:c}=o;return[d("map-context-menu",f,{key:6},[i("button",{className:e.computedClass,key:1,on:{click:u||(o._m0=a(e.handleClick))}},r(e.tile.layers,(function(t){return i("img",{attrs:{src:t.src},key:s(0,t.id)},[])}))),d("map-menu",x,{attrs:{slot:"menu"},key:5},[d("map-menu-item",E,{key:2,on:{click:c||(o._m1=a(e.handleDelete))}},[l("Delete")]),d("map-menu-item",E,{key:3},[l("Fake Option 1")]),d("map-menu-item",E,{key:4},[l("Fake Option 2")])])])]}var L,j=Object(o.registerTemplate)(_);function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}_.stylesheets=[],c&&_.stylesheets.push.apply(_.stylesheets,c),_.stylesheetTokens={hostAttribute:"map-tile-_tile-host",shadowAttribute:"map-tile-_tile"};class O{constructor(){M(this,"id",""),M(this,"file","")}get src(){return`resources/tiles/${this.file}.svg`}from(t){return"string"==typeof t?(this.id=t,this.file=t,this):(this.id=t.id,this.file=t.file,this)}}!function(t){t[t.None=0]="None",t[t.Top=1]="Top",t[t.Right=2]="Right",t[t.Bottom=4]="Bottom",t[t.Left=8]="Left",t[t.TopRight=3]="TopRight",t[t.TopLeft=9]="TopLeft",t[t.BottomLeft=12]="BottomLeft",t[t.BottomRight=6]="BottomRight",t[t.TopU=11]="TopU",t[t.RightU=7]="RightU",t[t.BottomU=14]="BottomU",t[t.LeftU=13]="LeftU",t[t.TopBottom=5]="TopBottom",t[t.LeftRight=10]="LeftRight",t[t.All=15]="All"}(L||(L={}));var $=L;function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class S{constructor(){A(this,"id",[null,null,null,null,null]),A(this,"comment",null),A(this,"collision",$.None),A(this,"layers",[]),A(this,"$coordinate",null)}get coordinate(){return this.$coordinate}setCoordinate(t,e){this.$coordinate=[t,e]}sides(t){const[,e,n,o,s]=this.id;[e,n,o,s].forEach(t)}get tileId(){return this.id[0]}get topId(){return this.id[1]}get rightId(){return this.id[2]}get bottomId(){return this.id[3]}get leftId(){return this.id[4]}get x(){return this.coordinate[0]}get y(){return this.coordinate[1]}from(t){return this.id=t.id,this.comment=t.comment||null,this.layers=t.layers.map(t=>(new O).from(t)),this}}class I extends o.LightningElement{constructor(...t){super(...t),this.isLoading=!0,this.tile=new S}renderedCallback(){const[t,e]=this.tile.coordinate||[0,0],n=this.template.host;n.style.left=`${4*t}rem`,n.style.top=`${4*e}rem`}handleClick(){console.log(this.tile)}handleDelete(){alert("delete"),console.log("testing")}}Object(o.registerDecorators)(I,{publicProps:{tile:{config:0}},track:{isLoading:1}});var D=Object(o.registerComponent)(I,{tmpl:j});var P=[function(t,e,n){return(n?":host{position:absolute;top:0;left:0}":t+"{position:absolute;top:0;left:0}")+"button"+e+"{padding:0;width:4rem;height:4rem;outline:none;background:rgba(0,0,100,.1);background-clip:content-box;cursor:inherit;color:rgba(0,0,100,.2);border:0}button:hover"+e+"{border-color:#fff;box-shadow:inset 0 0 .5rem rgba(0,0,0,.2);background:rgba(0,0,100,.15);color:rgba(0,0,100,.3)}"}];function N(t,e,n,o){const{d:s,t:i,b:r,h:a}=t,{_m0:l}=o;return[a("button",{className:e.computedClass,key:0,on:{click:l||(o._m0=r(e.handleClick))}},[s(e.x),i(", "),s(e.y)])]}var B=Object(o.registerTemplate)(N);N.stylesheets=[],P&&N.stylesheets.push.apply(N.stylesheets,P),N.stylesheetTokens={hostAttribute:"map-addTile-_addTile-host",shadowAttribute:"map-addTile-_addTile"};class R extends o.LightningElement{constructor(...t){super(...t),this.tile=null}get x(){return this.tile.coordinate[0]}get y(){return this.tile.coordinate[1]}get computedClass(){return""}renderedCallback(){const[t,e]=this.tile.coordinate||[0,0],n=this.template.host;n.style.left=`${4*t}rem`,n.style.top=`${4*e}rem`}handleClick(){this.dispatchEvent(new CustomEvent("addtile",{detail:{x:this.tile.coordinate[0],y:this.tile.coordinate[1]},bubbles:!0,composed:!0}))}}Object(o.registerDecorators)(R,{publicProps:{tile:{config:0}}});var F=Object(o.registerComponent)(R,{tmpl:B});var G=[function(t,e,n){return(n?":host{display:flex;justify-content:center;width:100%;height:100%;position:absolute;top:0;left:0;background:rgba(0,0,0,.6)}":t+"{display:flex;justify-content:center;width:100%;height:100%;position:absolute;top:0;left:0;background:rgba(0,0,0,.6)}")+"div"+e+"{align-self:center;display:block;background:#fff;width:15rem;border-radius:.5rem;box-shadow:0 .25rem .5rem rgba(0,0,0,.4);padding:1rem}"}];function H(t,e,n,o){const{s:s,h:i}=t;return[i("div",{key:1},[s("",{key:0},[],n)])]}var W=Object(o.registerTemplate)(H);H.slots=[""],H.stylesheets=[],G&&H.stylesheets.push.apply(H.stylesheets,G),H.stylesheetTokens={hostAttribute:"map-modal-_modal-host",shadowAttribute:"map-modal-_modal"};var z=Object(o.registerComponent)(class extends o.LightningElement{},{tmpl:W});var U=[function(t,e,n){return(n?":host{display:inline-block}":t+"{display:inline-block}")+"button"+e+"{border:1px solid #ddd;border-radius:.25rem;background:#eee;padding:.5rem .5rem .45rem;color:#222}button:hover"+e+"{border-color:#bbb}button.variant-primary"+e+"{border-color:#007bff;background-color:#007bff;color:#fff}button.variant-primary:hover"+e+"{background-color:#0069d9;border-color:#0062cc}"+(n?":host(.buttonGroup-slot:first-child) button"+e+"{border-radius:.25rem 0 0 .25rem;margin-right:-1px}":t+":first-child.buttonGroup-slot button"+e+"{border-radius:.25rem 0 0 .25rem;margin-right:-1px}")+(n?":host(.buttonGroup-slot:last-child) button"+e+"{border-radius:0 .25rem .25rem 0}":t+":last-child.buttonGroup-slot button"+e+"{border-radius:0 .25rem .25rem 0}")+(n?":host(.buttonGroup-slot) button:hover"+e+"{position:relative;z-index:1}":t+".buttonGroup-slot button:hover"+e+"{position:relative;z-index:1}")}];function V(t,e,n,o){const{b:s,s:i,h:r}=t,{_m0:a,_m1:l,_m2:d,_m3:u}=o;return[r("button",{className:e.computedClass,key:3,on:{click:u||(o._m3=s(e.handleClick))}},[i("left",{attrs:{name:"left"},key:0,on:{slotchange:a||(o._m0=s(e.handleLeftSlotChange))}},[],n),i("",{key:1,on:{slotchange:l||(o._m1=s(e.handleSlotChange))}},[],n),i("right",{attrs:{name:"right"},key:2,on:{slotchange:d||(o._m2=s(e.handleRightSlotChange))}},[],n)])]}var q=Object(o.registerTemplate)(V);V.slots=["left","","right"],V.stylesheets=[],U&&V.stylesheets.push.apply(V.stylesheets,U),V.stylesheetTokens={hostAttribute:"map-button-_button-host",shadowAttribute:"map-button-_button"};class J extends o.LightningElement{constructor(...t){super(...t),this.variant="default"}handleClick(t){}get computedClass(){return`variant-${this.variant}`}connectedCallback(){this.addEventListener("slot",this.slot)}slot({target:t,detail:e}){const n=t,o=e.name?`-${e.name}`:"",s=[`${e.component}-slot${o}`,`${e.component}-slot${o}-${e.variant}`];n.className=s.join(" ")}handleLeftSlotChange(t){this.template.childNodes[1].childNodes[0].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"button",name:"left",variant:this.variant}}))})}handleSlotChange(t){this.template.childNodes[1].childNodes[1].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"button",name:null,variant:this.variant}}))})}handleRightSlotChange(t){this.template.childNodes[1].childNodes[2].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"button",name:"right",variant:this.variant}}))})}}Object(o.registerDecorators)(J,{publicProps:{variant:{config:0}}});var X=Object(o.registerComponent)(J,{tmpl:q});var Y=[function(t,e,n){return(n?":host{display:inline-block;width:1.5rem;height:1.5rem}":t+"{display:inline-block;width:1.5rem;height:1.5rem}")+"svg"+e+"{fill:#444}"+(n?":host(.button-slot){vertical-align:middle;margin:-.35rem 0 -.25rem}":t+".button-slot{vertical-align:middle;margin:-.35rem 0 -.25rem}")+(n?":host(.button-slot-left){vertical-align:middle;margin:-.35rem .25rem -.25rem -.25rem}":t+".button-slot-left{vertical-align:middle;margin:-.35rem .25rem -.25rem -.25rem}")+(n?":host(.button-slot-right){vertical-align:middle;margin:-.35rem -.25rem -.25rem .25rem}":t+".button-slot-right{vertical-align:middle;margin:-.35rem -.25rem -.25rem .25rem}")+(n?":host(.button-slot-left-primary) svg"+e+",:host(.button-slot-primary) svg"+e+",:host(.button-slot-right-primary) svg"+e+"{fill:#fff}":t+".button-slot-left-primary svg"+e+","+t+".button-slot-primary svg"+e+","+t+".button-slot-right-primary svg"+e+"{fill:#fff}")}];function Z(t,e,n,o){const{h:s}=t;return[s("svg",{attrs:{viewBox:"0 0 24 24"},key:1},[s("path",{attrs:{d:e.path},key:0},[])])]}var K=Object(o.registerTemplate)(Z);Z.stylesheets=[],Y&&Z.stylesheets.push.apply(Z.stylesheets,Y),Z.stylesheetTokens={hostAttribute:"map-icon-_icon-host",shadowAttribute:"map-icon-_icon"};class Q extends o.LightningElement{constructor(...t){super(...t),this._path=""}get path(){return this._path}set path(t){this._path=t}connectedCallback(){this.addEventListener("slot",this.slot)}slot({target:t,detail:e}){const n=t,o=e.name?`-${e.name}`:"",s=[`${e.component}-slot${o}`,`${e.component}-slot${o}-${e.variant}`];n.className=s.join(" ")}}Object(o.registerDecorators)(Q,{publicProps:{path:{config:3}},fields:["_path"]});var tt=Object(o.registerComponent)(Q,{tmpl:K});var et=[function(t,e,n){return(n?":host{position:absolute;top:1rem;right:1rem;width:20rem}":t+"{position:absolute;top:1rem;right:1rem;width:20rem}")+"ul"+e+"{list-style:none;margin:0;padding:0}"}];var nt=[function(t,e,n){return"button"+e+"{display:block;width:100%;text-align:left;position:relative;border-radius:.25rem;margin-bottom:.5rem;background:#fff;border:0;padding:1rem;box-shadow:0 1px .5rem rgba(0,0,0,.3);outline:0;cursor:pointer}button:hover"+e+"{box-shadow:0 1px .5rem rgba(0,0,0,.4)}button"+e+" svg"+e+"{fill:#444}button:hover"+e+" svg"+e+"{fill:#1592e6}button:active"+e+"{box-shadow:0 1px .5rem rgba(0,0,0,.5)}button"+e+" svg.loading"+e+"{display:none}span"+e+"{display:block;text-align:left;position:relative;border-radius:.25rem;margin-bottom:.5rem;background:#fff;border:0;padding:1rem;box-shadow:0 1px .5rem rgba(0,0,0,.3);outline:0}span.variant-loading"+e+"{padding-left:2.75rem}span.variant-loading"+e+" svg.loading"+e+"{fill:#1592e6}button.variant-loading"+e+" svg.loading"+e+"{display:none}button.variant-error"+e+"{background:#ff6961;color:#fff}button.variant-error"+e+" svg.close"+e+"{fill:#c23b23}button.variant-error:hover"+e+" svg.close"+e+"{fill:#fff}button.variant-warning"+e+"{background:#fdf7c2}button.variant-warning"+e+" svg.close"+e+"{fill:#cec78d}button.variant-warning:hover"+e+" svg.close"+e+"{fill:#444}button.variant-loading"+e+" svg.loading"+e+"{display:initial}button.variant-loading"+e+" svg.close"+e+"{display:none}button.seconds-1"+e+",button.seconds-2"+e+",button.seconds-3"+e+",button.seconds-4"+e+",button.seconds-5"+e+"{margin-bottom:1.25rem}button.seconds-1"+e+":after,button.seconds-2"+e+":after,button.seconds-3"+e+":after,button.seconds-4"+e+":after,button.seconds-5"+e+':after{content:" ";position:absolute;background:rgba(21,146,230,.5);height:.25rem;width:2rem;left:0;bottom:0;overflow:hidden}button.seconds-1'+e+":after{animation:a 1s linear}button.seconds-2"+e+":after{animation:a 2s linear}button.seconds-3"+e+":after{animation:a 3s linear}button.seconds-4"+e+":after{animation:a 4s linear}button.seconds-5"+e+":after{animation:a 5s linear}svg.close"+e+"{right:.5rem}svg.close"+e+",svg.loading"+e+"{position:absolute;width:1.5rem;height:1.5rem;top:.75rem}svg.loading"+e+"{left:.75rem;animation:b 2s infinite linear}@keyframes a{0%{width:0}to{width:20rem}}@keyframes b{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}"}];function ot(t,e,n,o){const{h:s,d:i,b:r}=t,{_m0:a}=o;return[e.dismissable?s("button",{className:e.computedClass,attrs:{"data-id":e.toast.id},key:4,on:{click:a||(o._m0=r(e.handleClick))}},[s("svg",{classMap:{loading:!0},attrs:{viewBox:"0 0 24 24"},key:1},[s("path",{attrs:{d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"},key:0},[])]),i(e.toast.message),s("svg",{classMap:{close:!0},attrs:{viewBox:"0 0 24 24"},key:3},[s("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},key:2},[])])]):null,e.dismissable?null:s("span",{className:e.computedClass,key:7},[s("svg",{classMap:{loading:!0},attrs:{viewBox:"0 0 24 24"},key:6},[s("path",{attrs:{d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"},key:5},[])]),i(e.toast.message)])]}var st=Object(o.registerTemplate)(ot);function it(t,e){let n;function o(t){n.next(t)}function s(t){n.error(t)}const i={subscribe:i=>(n=i,t&&o(t),e&&s(e),{unsubscribe:()=>{}})};return{next:o,error:s,complete:function(){n.complete()},observable:i}}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ot.stylesheets=[],nt&&ot.stylesheets.push.apply(ot.stylesheets,nt),ot.stylesheetTokens={hostAttribute:"map-toastItem-_toastItem-host",shadowAttribute:"map-toastItem-_toastItem"};class at{constructor(){rt(this,"id",0),rt(this,"message",""),rt(this,"seconds",0),rt(this,"variant",""),rt(this,"dismissable",!0)}from(t){return this.id=t.id,this.message=t.message,this.seconds=t.seconds,this.variant=t.variant,this.dismissable=t.dismissable,this}}const lt=[],dt=it([],void 0);function ut(t){return dt.observable}let ct=0;function ht(t){return t.id=ct++,lt.push(t),dt.next(lt),t.seconds&&setTimeout(()=>{bt(t.id)},1e3*t.seconds),t.id}function mt(t,e=0){var n=new at;return n.message=t,n.seconds=e,ht(n)}function pt(t,e=0){var n=new at;return n.message=t,n.seconds=e,n.variant="error",ht(n)}function gt(t,e=0){var n=new at;return n.message=t,n.seconds=e,n.variant="loading",n.dismissable=!1,ht(n)}function bt(t){lt.splice(lt.findIndex(e=>e.id===t),1),dt.next(lt)}function ft(t){return new Promise((t,e)=>{const n=ut();if(!n)return e(new Error("Dev: invalid observable"));n.subscribe({next:e=>t(e),error:t=>e(t),complete:t})})}Object(s.register)(ft,(function(t){let e,n;t.dispatchEvent(new s.ValueChangedEvent({data:void 0,error:void 0}));const o={next:e=>t.dispatchEvent(new s.ValueChangedEvent({data:e,error:void 0})),error:e=>t.dispatchEvent(new s.ValueChangedEvent({data:void 0,error:e}))};t.addEventListener("connect",()=>{const t=ut();t&&(e=t.subscribe(o))}),t.addEventListener("disconnect",()=>{e.unsubscribe()}),t.addEventListener("config",t=>{n=t,e&&(e.unsubscribe(),e=void 0);const s=ut();s&&(e=s.subscribe(o))})}));class vt extends o.LightningElement{constructor(...t){super(...t),this.toast=void 0}get computedClass(){var t=[`variant-${this.toast.variant}`];return this.toast.seconds>0&&t.push(`seconds-${this.toast.seconds}`),t.join(" ")}get dismissable(){return this.toast.dismissable}handleClick(t){bt(parseInt(t.target.dataset.id))}}Object(o.registerDecorators)(vt,{publicProps:{toast:{config:0}}});var yt=Object(o.registerComponent)(vt,{tmpl:st});function kt(t,e,n,o){const{c:s,k:i,h:r,i:a}=t;return[r("ul",{key:2},a(e.toasts,(function(t){return r("li",{key:i(1,t.id)},[s("map-toast-item",yt,{props:{toast:t},key:0},[])])})))]}var xt=Object(o.registerTemplate)(kt);kt.stylesheets=[],et&&kt.stylesheets.push.apply(kt.stylesheets,et),kt.stylesheetTokens={hostAttribute:"map-toast-_toast-host",shadowAttribute:"map-toast-_toast"};class wt extends o.LightningElement{constructor(...t){super(...t),this.toastWire=void 0}get toasts(){return this.toastWire.data}}Object(o.registerDecorators)(wt,{wire:{toastWire:{adapter:ft}}});var Ct=Object(o.registerComponent)(wt,{tmpl:xt});var Tt=[function(t,e,n){return n?":host{display:inline-block;margin-right:1px}":t+"{display:inline-block;margin-right:1px}"}];function Et(t,e,n,o){const{b:s,s:i}=t,{_m0:r}=o;return[i("",{key:0,on:{slotchange:r||(o._m0=s(e.handleSlotChange))}},[],n)]}var _t=Object(o.registerTemplate)(Et);Et.slots=[""],Et.stylesheets=[],Tt&&Et.stylesheets.push.apply(Et.stylesheets,Tt),Et.stylesheetTokens={hostAttribute:"map-buttonGroup-_buttonGroup-host",shadowAttribute:"map-buttonGroup-_buttonGroup"};class Lt extends o.LightningElement{constructor(...t){super(...t),this.variant="default"}get computedClass(){return`variant-${this.variant}`}handleSlotChange(t){this.template.childNodes[1].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"buttonGroup",name:null,variant:this.variant}}))})}}Object(o.registerDecorators)(Lt,{publicProps:{variant:{config:0}}});var jt=Object(o.registerComponent)(Lt,{tmpl:_t});var Mt=[function(t,e,n){return n?":host{position:fixed;bottom:0;right:0}":t+"{position:fixed;bottom:0;right:0}"}];function Ot(t,e,n,o){const{t:s,h:i}=t;return[i("div",{key:0},[s("Testing")]),i("div",{key:1},[s("Details")])]}var $t=Object(o.registerTemplate)(Ot);Ot.stylesheets=[],Mt&&Ot.stylesheets.push.apply(Ot.stylesheets,Mt),Ot.stylesheetTokens={hostAttribute:"map-details-_details-host",shadowAttribute:"map-details-_details"};class At extends o.LightningElement{constructor(...t){super(...t),this.name=null,this.author=null}}Object(o.registerDecorators)(At,{publicProps:{name:{config:0},author:{config:0}}});var St=Object(o.registerComponent)(At,{tmpl:$t});function It(t,e,n,o){const{k:s,c:i,i:r,f:a,t:l,h:d,b:c,d:h}=t,{_m0:m,_m1:p,_m2:g,_m3:b,_m4:f,_m5:v,_m6:y,_m7:k}=o;return[i("map-world",u,{props:{world:e.world},key:2},e.world?a([r(e.world.tiles,(function(t){return i("map-tile",D,{props:{tile:t},key:s(0,t.tileId)},[])})),r(e.world.addTiles,(function(t){return i("map-add-tile",F,{props:{tile:t},key:s(1,t.id)},[])}))]):[]),e.world?null:i("map-modal",z,{key:7},[d("h1",{key:3},[l("Load Map")]),d("p",{key:4},[l("Select Map Modal Here")]),i("map-button",X,{key:6,on:{click:m||(o._m0=c(e.loadMap))}},[i("map-icon",tt,{attrs:{slot:"left"},props:{path:e.mdiScript},key:5},[]),l("Load Mock Map")])]),i("map-toast",Ct,{key:8},[]),d("section",{key:16},[d("h2",{key:9},[l("Buttons")]),i("map-button",X,{key:11,on:{click:p||(o._m1=c(e.fireToast))}},[i("map-icon",tt,{attrs:{slot:"left"},props:{path:e.mdiMessageText},key:10},[]),l("Fire Toast")]),i("map-button",X,{props:{variant:"primary"},key:13,on:{click:g||(o._m2=c(e.fireToast3))}},[i("map-icon",tt,{attrs:{slot:"left"},props:{path:e.mdiMessageText},key:12},[]),l("Fire Toast 3 Seconds")]),i("map-button",X,{props:{variant:"primary"},key:15,on:{click:b||(o._m3=c(e.fireToast3))}},[i("map-icon",tt,{props:{path:e.mdiMessageText},key:14},[])])]),d("section",{key:21},[d("h2",{key:17},[l("Button Group")]),i("map-button-group",jt,{key:20},[i("map-button",X,{key:18,on:{click:f||(o._m4=c(e.fireErrorToast))}},[l("Fire Error Toast")]),i("map-button",X,{key:19,on:{click:v||(o._m5=c(e.fireWarningToast))}},[l("Fire Warning Toast")])])]),d("section",{key:26},[d("h2",{key:22},[l("Load Map")]),i("map-button",X,{key:24,on:{click:y||(o._m6=c(e.loadMap))}},[i("map-icon",tt,{attrs:{slot:"left"},props:{path:e.mdiScript},key:23},[]),l("Load Mock Map")]),i("map-button",X,{key:25,on:{click:k||(o._m7=c(e.loadMap2))}},[l("Load Mock Error")])]),i("map-details",St,{props:{name:"Foo"},key:27},[]),d("section",{key:29},[d("h2",{key:28},[l("Map Data ("),h(e.tileCount),l(")")]),h(e.data)])]}var Dt=Object(o.registerTemplate)(It);function Pt(t){if(!(t&&"id"in t))return;const e=it(void 0,void 0);return null!==t.id&&fetch(`mock/mock.${t.id}.json`).then(t=>t.json()).then(t=>{console.log(t),e.next(t)},()=>{e.error({message:"Failed to load map."})}),e.observable}function Nt(t){return new Promise((e,n)=>{const o=Pt(t);if(!o)return n(new Error("Dev: id required"));o.subscribe({next:t=>e(t),error:t=>n(t),complete:e})})}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}It.stylesheets=[],i&&It.stylesheets.push.apply(It.stylesheets,i),It.stylesheetTokens={hostAttribute:"map-app-_app-host",shadowAttribute:"map-app-_app"},Object(s.register)(Nt,(function(t){let e,n;t.dispatchEvent(new s.ValueChangedEvent({data:void 0,error:void 0}));const o={next:e=>t.dispatchEvent(new s.ValueChangedEvent({data:e,error:void 0})),error:e=>t.dispatchEvent(new s.ValueChangedEvent({data:void 0,error:e}))};t.addEventListener("connect",()=>{const t=Pt(n);t&&(e=t.subscribe(o))}),t.addEventListener("disconnect",()=>{e.unsubscribe()}),t.addEventListener("config",t=>{n=t,e&&(e.unsubscribe(),e=void 0);const s=Pt(n);s&&(e=s.subscribe(o))})}));class Rt{constructor(){Bt(this,"id",""),Bt(this,"name",""),Bt(this,"description",""),Bt(this,"author",""),Bt(this,"tiles",[]),Bt(this,"$tileCount",0)}get tileCount(){return this.$tileCount||this.tiles.length}set tileCount(t){this.$tileCount=t}get addTiles(){const t=[];return this.iterateTiles(this.tiles[0],(e,n)=>{e.sides((e,o)=>{if(null===e){const e=this.getSideCoordinate(n,o);t.push(e)}})}),t.filter(this.uniqueCoordinates).map((t,e)=>({id:e,coordinate:t}))}uniqueCoordinates(t,e,n){return n.findIndex(e=>e[0]===t[0]&&e[1]===t[1])===e}from(t){return null===t?this:(this.name=t.name,this.description=t.description,this.author=t.author,t.tiles&&(this.tiles=t.tiles.map(t=>(new S).from(t)),this.iterateTiles(this.tiles[0],(t,[e,n])=>{t.setCoordinate(e,n)})),t.tileCount&&(this.tileCount=t.tileCount),this)}getTile(t,e){return this.tiles.find(n=>n.coordinate[0]===t&&n.coordinate[1]===e)||null}getSidesByCoordinate(t,e){return[this.getTile(t,e-1),this.getTile(t+1,e),this.getTile(t,e+1),this.getTile(t-1,e)]}getSideCoordinate([t,e],n){switch(n){case 0:return[t,e-1];case 1:return[t+1,e];case 2:return[t,e+1];case 3:return[t-1,e]}throw new Error("Invalid side")}getSides(t){return[this.tiles.find(e=>e.id[0]===t.id[1])||null,this.tiles.find(e=>e.id[0]===t.id[2])||null,this.tiles.find(e=>e.id[0]===t.id[3])||null,this.tiles.find(e=>e.id[0]===t.id[4])||null]}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}addTile(t,e,n){var o=this.getSidesByCoordinate(t,e),s=this.uuidv4();const i=new S;i.setCoordinate(t,e);const r=[...o.map(t=>t?t.id[0]:null)];i.id=[s,r[0],r[1],r[2],r[3]],i.layers=n||[(new O).from("paper-tan"),(new O).from("tile-lines-1")],this.tiles.push(i),o[0]&&(o[0].id[3]=s),o[1]&&(o[1].id[4]=s),o[2]&&(o[2].id[1]=s),o[3]&&(o[3].id[2]=s)}removeTile(t){var e=this.getSides(t);this.tiles.splice(this.tiles.findIndex(e=>e.id[0]===t.id[0]),1),e[0]&&(e[0].id[3]=null),e[1]&&(e[1].id[4]=null),e[2]&&(e[2].id[1]=null),e[3]&&(e[3].id[2]=null)}canRemove(t){return 1!==this.tiles.length&&this.getSides(t).map(e=>{if(e){var n=0;return this.iterateTiles(e,()=>n++,[t]),n}return null}).filter(t=>null!==t).every(t=>t===this.tiles.length-1)}iterateTiles(t,e,n=[]){const o=(t,n,[s,i])=>{t.splice(t.findIndex(t=>t.id[0]===n.id[0]),1)[0],e(n,[s,i]);var[,r,a,l,d]=n.id;[r,a,l,d].forEach((e,n)=>{if(null!==e){var r=t.find(t=>t.id[0]===e);if(r){const e=this.getSideCoordinate([s,i],n);o(t,r,e)}}})};var s=[...this.tiles];if(n){var i=n.map(t=>t.id[0]);s=s.filter(t=>!i.includes(t.id[0]))}o(s,t,[0,0])}getCollision(t,e){var n=t.collision,o=[1===n||3===n||5===n||7===n||9===n||11===n||13===n||15===n?1:0,2===n||3===n||6===n||7===n||10===n||11===n||14===n||15===n?1:0,4===n||5===n||6===n||7===n||12===n||13===n||14===n||15===n?1:0,8===n||9===n||10===n||11===n||12===n||13===n||14===n||15===n?1:0];return o[e]=0===o[e]?1:0,1*o[0]+2*o[1]+4*o[2]+8*o[3]}}var Ft=n(2);class Gt extends o.LightningElement{constructor(...t){super(...t),this.tile={complex:"object"},this.tileId=null,this.tileCount=0,this.world=null,this.mdiAccount=Ft.a,this.mdiMessageText=Ft.b,this.mdiScript=Ft.c}function({error:t,data:e}){e&&(this.world=(new Rt).from(e),console.log(this.world.addTiles),bt(this.loadingToastId)),t&&(this.world=null,this.tileId=null,pt("Failed to load map!",5e3),bt(this.loadingToastId))}connectedCallback(){this.addEventListener("addtile",this.addTile.bind(this))}addTile(t){const{x:e,y:n}=t.detail;this.world.addTile(e,n,null),this.tileCount=this.world.tileCount,console.log(this.tileCount,e,n)}get data(){return JSON.stringify(this.world)}loadMap(){this.tileId="world",this.loadingToastId=gt("Loading Map...")}loadMap2(){this.tileId="world1",this.loadingToastId=gt("Loading Map...")}fireToast(){mt("Toast Message")}fireToast3(){mt("Toast Message 3 seconds",3)}fireErrorToast(){pt("Toast Error Message")}fireWarningToast(){!function(t,e=0){var n=new at;n.message=t,n.seconds=e,n.variant="warning",ht(n)}("Toast Warning Message")}}Object(o.registerDecorators)(Gt,{wire:{function:{adapter:Nt,params:{id:"tileId"},static:{},method:1}},track:{tile:1,tileId:1,tileCount:1,world:1,mdiAccount:1,mdiMessageText:1,mdiScript:1}});var Ht=Object(o.registerComponent)(Gt,{tmpl:Dt});Object(s.registerWireService)(o.register),customElements.define("map-app",Object(o.buildCustomElementConstructor)(Ht))}});