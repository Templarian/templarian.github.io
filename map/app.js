!function(t){function e(e){for(var n,r,a=e[0],l=e[1],d=e[2],u=0,m=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(h&&h(e);m.length;)m.shift()();return i.push.apply(i,d||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,a=1;a<s.length;a++){var l=s[a];0!==o[l]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},o={1:0},i=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var d=0;d<a.length;d++)e(a[d]);var h=l;i.push([5,0,2]),s()}({5:function(t,e,s){t.exports=s(6)},6:function(t,e,s){"use strict";s.r(e);var n=s(0),o=s(1);var i=[function(t,e,s){return(s?":host{display:block;height:100%}":t+"{display:block;height:100%}")+".link"+e+"{border:none;padding:10px;border-radius:5px;text-decoration:none;background-color:#ff6000;color:#fff;margin-left:33%;margin-right:33%;display:inline-block;margin-top:1em}.info"+e+"{color:#000;background-color:#e4f2f8;margin:auto;padding:15px 10px;text-align:left;width:300px;border-radius:5px}.code"+e+"{font-family:monospace;font-size:large}.container"+e+"{margin-top:30px}img"+e+"{max-width:150px}.greeting"+e+"{height:75px}section"+e+"{padding:1rem;margin:1rem;background:#fff;border-radius:.5rem;box-shadow:0 1px 4px rgba(0,0,0,.2)}section"+e+" h2"+e+"{margin:0 0 .5rem;font-weight:400}"}];var r=[function(t,e,s){return s?":host{display:grid;grid-template-columns:var(--grid-offset-x,0) repeat(var(--grid-width,3),4rem);grid-template-rows:var(--grid-offset-y,0) repeat(var(--grid-height,3),4rem);overflow:hidden;height:100vh;background-color:#fff;background-image:url(resources/tiles/paper-dots.svg);background-repeat:repeat;background-position:var(--offset-x,0) var(--offset-y,0);box-shadow:0 0 .5rem rgba(0,0,0,.3);justify-items:end;align-items:end}":t+"{display:grid;grid-template-columns:var(--grid-offset-x,0) repeat(var(--grid-width,3),4rem);grid-template-rows:var(--grid-offset-y,0) repeat(var(--grid-height,3),4rem);overflow:hidden;height:100vh;background-color:#fff;background-image:url(resources/tiles/paper-dots.svg);background-repeat:repeat;background-position:var(--offset-x,0) var(--offset-y,0);box-shadow:0 0 .5rem rgba(0,0,0,.3);justify-items:end;align-items:end}"}];function a(t,e,s,n){const{s:o}=t;return[o("",{key:0},[],s)]}var l=Object(n.registerTemplate)(a);a.slots=[""],a.stylesheets=[],r&&a.stylesheets.push.apply(a.stylesheets,r),a.stylesheetTokens={hostAttribute:"map-world-_world-host",shadowAttribute:"map-world-_world"};class d extends n.LightningElement{constructor(){super(),this.$world=null,this.$hash="3, 3",this.offsetX=0,this.offsetY=0,this.isDragging=!1,this.mouseX=0,this.mouseY=0,this.mouseDownHandler=this.handleMouseDown.bind(this),this.mouseUpHandler=this.handleMouseUp.bind(this),this.mouseMoveHandler=this.handleMouseMove.bind(this),this.addTileHandler=this.handleAddTile.bind(this)}get hash(){return this.$hash}set hash(t){if(this.$world){const t=this.template.host;t.style.setProperty("--grid-width",`${this.$world.width}`),t.style.setProperty("--grid-height",`${this.$world.height}`)}this.$hash=t}get world(){return this.$world}set world(t){if(t){const e=this.template.host.getBoundingClientRect(),s=64*t.width,n=64*t.height;this.offsetX=Math.floor(e.width/2-s/2),this.offsetY=Math.floor(e.height/2-n/2);const o=this.template.host,i=Math.floor(this.offsetX%64),r=Math.floor(this.offsetY%64);o.style.setProperty("--offset-x",`${i}px`),o.style.setProperty("--offset-y",`${r}px`),o.style.setProperty("--grid-offset-x",`${this.offsetX}px`),o.style.setProperty("--grid-offset-y",`${this.offsetY}px`),o.style.setProperty("--grid-width",`${t.width}`),o.style.setProperty("--grid-height",`${t.height}`)}this.$world=t}connectedCallback(){this.template.host.addEventListener("mousedown",this.mouseDownHandler),this.template.host.addEventListener("mouseup",this.mouseUpHandler),this.template.host.addEventListener("mousemove",this.mouseMoveHandler),this.addEventListener("addtile",this.addTileHandler)}handleMouseDown(t){this.isDragging=!0,this.mouseX=t.clientX,this.mouseY=t.clientY}handleMouseUp(t){this.isDragging=!1}handleMouseMove(t){this.isDragging&&(this.updateOffset(t.clientX-this.mouseX,t.clientY-this.mouseY),this.mouseX=t.clientX,this.mouseY=t.clientY)}updateOffset(t,e){const s=this.template.host,n=s.getBoundingClientRect(),{width:o,height:i}=this.$world;this.offsetX+=t,this.offsetY+=e;let r=this.offsetX;r<0&&(64*o>n.width?r=64-Math.abs(r%64):this.offsetX=r=0);let a=this.offsetY;a<0&&(64*i>n.height?a=64-Math.abs(a%64):this.offsetY=a=0);const l=Math.floor(r%64),d=Math.floor(a%64);s.style.setProperty("--offset-x",`${l}px`),s.style.setProperty("--offset-y",`${d}px`),s.style.setProperty("--grid-offset-x",`${r}px`),s.style.setProperty("--grid-offset-y",`${a}px`)}handleAddTile(t){const{minX:e,minY:s}=this.$world;e-1===t.detail.x&&this.updateOffset(-64,0),s-1===t.detail.y&&this.updateOffset(0,-64)}}Object(n.registerDecorators)(d,{publicProps:{hash:{config:3},world:{config:3}},track:{isDragging:1},fields:["$world","$hash","offsetX","offsetY","mouseX","mouseY"]});var h=Object(n.registerComponent)(d,{tmpl:l});var u=[function(t,e,s){return(s?":host{display:flex;width:4rem;height:4rem;grid-column:var(--column,1);grid-row:var(--row,1);order:0}":t+"{display:flex;width:4rem;height:4rem;grid-column:var(--column,1);grid-row:var(--row,1);order:0}")+(s?":host(:hover){order:1}":t+":hover{order:1}")+"button"+e+"{display:flex;padding:0;width:4.5rem;height:4.5rem;margin:-.25rem;outline:none;background:transparent;background-clip:content-box;border:.25rem solid transparent;cursor:inherit}button:hover"+e+"{border-color:#fff;box-shadow:0 0 10px rgba(0,0,0,.6);border-radius:4px}button"+e+" img"+e+"+img"+e+",button"+e+" span"+e+"{margin-left:-4rem}button"+e+" span"+e+"{display:flex;width:4rem;height:4rem;align-items:center;justify-content:center}"}];var m=[function(t,e,s){return".opened"+e+"{display:block}.closed"+e+"{display:inline-block}"}];function c(t,e,s,n){const{b:o,s:i}=t,{_m0:r,_m1:a}=n;return[i("",{key:0,on:{slotchange:r||(n._m0=o(e.handleSlotChange))}},[],s),e.isOpen?i("menu",{attrs:{name:"menu"},key:1,on:{slotchange:a||(n._m1=o(e.handleMenuSlotChange))}},[],s):null]}var p=Object(n.registerTemplate)(c);c.slots=["","menu"],c.stylesheets=[],m&&c.stylesheets.push.apply(c.stylesheets,m),c.stylesheetTokens={hostAttribute:"map-contextMenu-_contextMenu-host",shadowAttribute:"map-contextMenu-_contextMenu"};var g=s(3);class f extends n.LightningElement{constructor(){super(),this.$menu=null,this.$menuFocus=!1,this.$position=null,this.isOpen=!1,this.contextMenuHandler=this.handleContextMenu.bind(this),this.mouseDownHandler=this.handleMouseDown.bind(this)}handleContextMenu(t){this.isOpen=!0,this.$position=function(t){const e=t.clientX,s=t.clientY,{scrollX:n,scrollY:o}=window;return{clientWidth:0,clientHeight:0,getBoundingClientRect(){const{scrollX:t,scrollY:i}=window;return{width:0,height:0,top:s-i+o,bottom:s-i+o,left:e-t+n,right:e-t+n}}}}(t),t.preventDefault()}handleMouseDown(t){this.$menuFocus||(this.isOpen=!1,document.removeEventListener("mousedown",this.mouseDownHandler))}handleSlotChange(t){this.template.childNodes[1].assignedElements().forEach(t=>{t.addEventListener("contextmenu",this.contextMenuHandler)})}handleMenuSlotChange(t){const e=this.template.childNodes[2];if(e){console.log("menu slot changed");const t=e.assignedElements();if(0===t.length)throw new Error("contextMenu missing menu slot.");if(t.length>1)throw new Error("contextMenu must only contain one root element in the menu slot.");const s=t[0];document.addEventListener("mousedown",this.mouseDownHandler),new g.a(this.$position,s,{placement:"bottom-start",modifiers:{computeStyle:{gpuAcceleration:!1}}}),s.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),s.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),s.addEventListener("click",this.handleMouseClick.bind(this)),this.$menu=s}}handleMouseEnter(){this.$menuFocus=!0}handleMouseLeave(){this.$menuFocus=!1}handleMouseClick(){this.isOpen=!1,document.removeEventListener("mousedown",this.mouseDownHandler)}}Object(n.registerDecorators)(f,{track:{isOpen:1},fields:["$menu","$menuFocus","$position"]});var b=Object(n.registerComponent)(f,{tmpl:p});var y=[function(t,e,s){return s?":host{display:flex;flex-direction:column;border:1px solid #bbb;background:#fff;border-radius:.25rem;box-shadow:0 0 1.5rem rgba(0,0,0,.4);max-width:15rem;overflow:hidden}":t+"{display:flex;flex-direction:column;border:1px solid #bbb;background:#fff;border-radius:.25rem;box-shadow:0 0 1.5rem rgba(0,0,0,.4);max-width:15rem;overflow:hidden}"}];function v(t,e,s,n){const{s:o}=t;return[o("",{key:0},[],s)]}var w=Object(n.registerTemplate)(v);v.slots=[""],v.stylesheets=[],y&&v.stylesheets.push.apply(v.stylesheets,y),v.stylesheetTokens={hostAttribute:"map-menu-_menu-host",shadowAttribute:"map-menu-_menu"};var k=Object(n.registerComponent)(class extends n.LightningElement{},{tmpl:w});var x=[function(t,e,s){return(s?":host{display:flex}":t+"{display:flex}")+"button"+e+"{border:0;background:#fff;color:#444;padding:.75rem 1.25rem;width:100%;text-align:left}button:hover"+e+"{background:#eee}"}];function C(t,e,s,n){const{s:o,h:i}=t;return[i("button",{key:1},[o("",{key:0},[],s)])]}var M=Object(n.registerTemplate)(C);C.slots=[""],C.stylesheets=[],x&&C.stylesheets.push.apply(C.stylesheets,x),C.stylesheetTokens={hostAttribute:"map-menuItem-_menuItem-host",shadowAttribute:"map-menuItem-_menuItem"};var E=Object(n.registerComponent)(class extends n.LightningElement{},{tmpl:M});var O=[function(t,e,s){return s?":host{display:flex;border-top:1px solid #ddd;height:0}":t+"{display:flex;border-top:1px solid #ddd;height:0}"}];function T(t,e,s,n){const{}=t;return[]}var _=Object(n.registerTemplate)(T);T.stylesheets=[],O&&T.stylesheets.push.apply(T.stylesheets,O),T.stylesheetTokens={hostAttribute:"map-menuSeparator-_menuSeparator-host",shadowAttribute:"map-menuSeparator-_menuSeparator"};var $=Object(n.registerComponent)(class extends n.LightningElement{},{tmpl:_});var L=[function(t,e,s){return(s?":host{display:flex;justify-content:center;width:100%;height:100%;position:absolute;top:0;left:0;background:rgba(0,0,0,.6)}":t+"{display:flex;justify-content:center;width:100%;height:100%;position:absolute;top:0;left:0;background:rgba(0,0,0,.6)}")+"div"+e+"{align-self:center;display:block;background:#fff;width:15rem;border-radius:.5rem;box-shadow:0 .25rem .5rem rgba(0,0,0,.4);padding:1rem}"}];function j(t,e,s,n){const{s:o,h:i}=t;return[i("div",{key:1},[o("",{key:0},[],s)])]}var D=Object(n.registerTemplate)(j);j.slots=[""],j.stylesheets=[],L&&j.stylesheets.push.apply(j.stylesheets,L),j.stylesheetTokens={hostAttribute:"map-modal-_modal-host",shadowAttribute:"map-modal-_modal"};var A=Object(n.registerComponent)(class extends n.LightningElement{},{tmpl:D});var S=[function(t,e,s){return s?":host{display:flex}":t+"{display:flex}"}];function P(t,e,s,n){const{s:o}=t;return[o("",{key:0},[],s)]}var I=Object(n.registerTemplate)(P);P.slots=[""],P.stylesheets=[],S&&P.stylesheets.push.apply(P.stylesheets,S),P.stylesheetTokens={hostAttribute:"map-modalBody-_modalBody-host",shadowAttribute:"map-modalBody-_modalBody"};var B=Object(n.registerComponent)(class extends n.LightningElement{},{tmpl:I});var F=[function(t,e,s){return s?":host{display:flex;justify-content:flex-end}":t+"{display:flex;justify-content:flex-end}"}];function H(t,e,s,n){const{b:o,s:i}=t,{_m0:r}=n;return[i("",{key:0,on:{slotchange:r||(n._m0=o(e.handleSlotChange))}},[],s)]}var X=Object(n.registerTemplate)(H);H.slots=[""],H.stylesheets=[],F&&H.stylesheets.push.apply(H.stylesheets,F),H.stylesheetTokens={hostAttribute:"map-modalFooter-_modalFooter-host",shadowAttribute:"map-modalFooter-_modalFooter"};class Y extends n.LightningElement{constructor(...t){super(...t),this.variant="default"}handleSlotChange(t){this.template.childNodes[1].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"modalFooter",name:null,variant:this.variant}}))})}}Object(n.registerDecorators)(Y,{publicProps:{variant:{config:0}}});var N=Object(n.registerComponent)(Y,{tmpl:X});var R=[function(t,e,s){return(s?":host{display:inline-block}":t+"{display:inline-block}")+"button"+e+"{border:1px solid #ddd;border-radius:.25rem;background:#eee;padding:.5rem .5rem .45rem;color:#222}button:hover"+e+"{border-color:#bbb}button.variant-primary"+e+"{border-color:#007bff;background-color:#007bff;color:#fff}button.variant-primary:hover"+e+"{background-color:#0069d9;border-color:#0062cc}.down"+e+",.up"+e+"{display:none;vertical-align:middle;margin:-.35rem 0 -.25rem}"+(s?":host(.dropdown-down) .down"+e+",:host(.dropdown-up) .up"+e+"{display:inline-block}":t+".dropdown-down .down"+e+","+t+".dropdown-up .up"+e+"{display:inline-block}")+(s?":host(.buttonGroup-slot:first-child) button"+e+"{border-radius:.25rem 0 0 .25rem;margin-right:-1px}":t+":first-child.buttonGroup-slot button"+e+"{border-radius:.25rem 0 0 .25rem;margin-right:-1px}")+(s?":host(.buttonGroup-slot:last-child) button"+e+"{border-radius:0 .25rem .25rem 0}":t+":last-child.buttonGroup-slot button"+e+"{border-radius:0 .25rem .25rem 0}")+(s?":host(.buttonGroup-slot) button:hover"+e+"{position:relative;z-index:1}":t+".buttonGroup-slot button:hover"+e+"{position:relative;z-index:1}")+(s?":host(.modalFooter-slot:not(:first-child)) button"+e+"{margin-left:.5rem}":t+":not(:first-child).modalFooter-slot button"+e+"{margin-left:.5rem}")}];var G=[function(t,e,s){return(s?":host{display:inline-block;width:1.5rem;height:1.5rem}":t+"{display:inline-block;width:1.5rem;height:1.5rem}")+"svg"+e+"{fill:#444}"+(s?":host(.button-slot){vertical-align:middle;margin:-.35rem 0 -.25rem}":t+".button-slot{vertical-align:middle;margin:-.35rem 0 -.25rem}")+(s?":host(.button-slot-left){vertical-align:middle;margin:-.35rem .25rem -.25rem -.25rem}":t+".button-slot-left{vertical-align:middle;margin:-.35rem .25rem -.25rem -.25rem}")+(s?":host(.button-slot-right){vertical-align:middle;margin:-.35rem -.25rem -.25rem .25rem}":t+".button-slot-right{vertical-align:middle;margin:-.35rem -.25rem -.25rem .25rem}")+(s?":host(.button-slot-left-primary) svg"+e+",:host(.button-slot-primary) svg"+e+",:host(.button-slot-right-primary) svg"+e+"{fill:#fff}":t+".button-slot-left-primary svg"+e+","+t+".button-slot-primary svg"+e+","+t+".button-slot-right-primary svg"+e+"{fill:#fff}")}];function U(t,e,s,n){const{h:o}=t;return[o("svg",{attrs:{viewBox:"0 0 24 24"},key:1},[o("path",{attrs:{d:e.path},key:0},[])])]}var W=Object(n.registerTemplate)(U);U.stylesheets=[],G&&U.stylesheets.push.apply(U.stylesheets,G),U.stylesheetTokens={hostAttribute:"map-icon-_icon-host",shadowAttribute:"map-icon-_icon"};class V extends n.LightningElement{constructor(...t){super(...t),this._path=""}get path(){return this._path}set path(t){this._path=t}connectedCallback(){this.addEventListener("slot",this.slot)}slot({target:t,detail:e}){const s=t,n=e.name?`-${e.name}`:"",o=[`${e.component}-slot${n}`,`${e.component}-slot${n}-${e.variant}`];s.className=o.join(" ")}}Object(n.registerDecorators)(V,{publicProps:{path:{config:3}},fields:["_path"]});var q=Object(n.registerComponent)(V,{tmpl:W});function z(t,e,s,n){const{b:o,s:i,c:r,h:a}=t,{_m0:l,_m1:d,_m2:h,_m3:u}=n;return[a("button",{className:e.computedClass,key:5,on:{click:u||(n._m3=o(e.handleClick))}},[i("left",{attrs:{name:"left"},key:0,on:{slotchange:l||(n._m0=o(e.handleLeftSlotChange))}},[],s),i("",{key:1,on:{slotchange:d||(n._m1=o(e.handleSlotChange))}},[],s),i("right",{attrs:{name:"right"},key:2,on:{slotchange:h||(n._m2=o(e.handleRightSlotChange))}},[],s),r("map-icon",q,{classMap:{down:!0},props:{path:e.mdiMenuDown},key:3},[]),r("map-icon",q,{classMap:{up:!0},props:{path:e.mdiMenuUp},key:4},[])])]}var J=Object(n.registerTemplate)(z);z.slots=["left","","right"],z.stylesheets=[],R&&z.stylesheets.push.apply(z.stylesheets,R),z.stylesheetTokens={hostAttribute:"map-button-_button-host",shadowAttribute:"map-button-_button"};var Z=s(2);class K extends n.LightningElement{constructor(...t){super(...t),this.variant="default",this.mdiMenuUp=Z.c,this.mdiMenuDown=Z.b}handleClick(t){}get computedClass(){return`variant-${this.variant}`}connectedCallback(){this.addEventListener("slot",this.slot)}slot({target:t,detail:e}){const s=t,n=e.name?`-${e.name}`:"",o=[`${e.component}-slot${n}`,`${e.component}-slot${n}-${e.variant}`];s.className=o.join(" ")}handleLeftSlotChange(t){this.template.childNodes[1].childNodes[0].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"button",name:"left",variant:this.variant}}))})}handleSlotChange(t){this.template.childNodes[1].childNodes[1].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"button",name:null,variant:this.variant}}))})}handleRightSlotChange(t){this.template.childNodes[1].childNodes[2].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"button",name:"right",variant:this.variant}}))})}}Object(n.registerDecorators)(K,{publicProps:{variant:{config:0}},fields:["mdiMenuUp","mdiMenuDown"]});var Q=Object(n.registerComponent)(K,{tmpl:J});function tt(t,e,s,n){const{k:o,h:i,i:r,d:a,f:l,b:d,t:h,c:u}=t,{_m0:m,_m1:c,_m2:p,_m3:g,_m4:f}=n;return[u("map-context-menu",b,{key:7},[i("button",{className:e.computedClass,key:2,on:{click:m||(n._m0=d(e.handleClick))}},l([r(e.tile.layers,(function(t){return i("img",{attrs:{src:t.src},key:o(0,t.id)},[])})),i("span",{key:1},[a(e.hash)])])),u("map-menu",k,{attrs:{slot:"menu"},key:6},[u("map-menu-item",E,{key:3,on:{click:c||(n._m1=d(e.handleDelete))}},[h("Delete")]),u("map-menu-separator",$,{key:4},[]),e.tile.comment?u("map-menu-item",E,{key:5,on:{click:p||(n._m2=d(e.handleComment))}},[h("Delete Comment")]):null])]),e.openDeleteComment?u("map-modal",A,{key:13},[u("map-modal-body",B,{key:9},[i("p",{key:8},[h("Are you sure you want to clear the comment?")])]),u("map-modal-footer",N,{key:12},[u("map-button",Q,{key:10,on:{click:g||(n._m3=d(e.cancelDeleteComment))}},[h("Cancel")]),u("map-button",Q,{props:{variant:"primary"},key:11,on:{click:f||(n._m4=d(e.confirmDeleteComment))}},[h("Delete")])])]):null]}var et,st=Object(n.registerTemplate)(tt);function nt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}tt.stylesheets=[],u&&tt.stylesheets.push.apply(tt.stylesheets,u),tt.stylesheetTokens={hostAttribute:"map-tile-_tile-host",shadowAttribute:"map-tile-_tile"};class ot{constructor(){nt(this,"id",""),nt(this,"file","")}get src(){return`resources/tiles/${this.file}.svg`}from(t){return"string"==typeof t?(this.id=t,this.file=t,this):(this.id=t.id,this.file=t.file,this)}}!function(t){t[t.None=0]="None",t[t.Top=1]="Top",t[t.Right=2]="Right",t[t.Bottom=4]="Bottom",t[t.Left=8]="Left",t[t.TopRight=3]="TopRight",t[t.TopLeft=9]="TopLeft",t[t.BottomLeft=12]="BottomLeft",t[t.BottomRight=6]="BottomRight",t[t.TopU=11]="TopU",t[t.RightU=7]="RightU",t[t.BottomU=14]="BottomU",t[t.LeftU=13]="LeftU",t[t.TopBottom=5]="TopBottom",t[t.LeftRight=10]="LeftRight",t[t.All=15]="All"}(et||(et={}));var it=et;function rt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class at{constructor(){rt(this,"id",[null,null,null,null,null]),rt(this,"comment",null),rt(this,"collision",it.None),rt(this,"layers",[]),rt(this,"$coordinate",[0,0]),rt(this,"$gridOffset",[0,0])}get hash(){return`${this.gridX}, ${this.gridY}`}get coordinate(){return this.$coordinate}setCoordinate(t,e){this.$coordinate=[t,e]}get x(){return this.coordinate[0]}get y(){return this.coordinate[1]}get gridOffset(){return this.$gridOffset}get gridCoordinate(){return[this.$coordinate[0]+this.$gridOffset[0],this.$coordinate[1]+this.$gridOffset[1]]}get gridX(){return this.$coordinate[0]+this.$gridOffset[0]+1}get gridY(){return this.$coordinate[1]+this.$gridOffset[1]+1}setGridOffset(t,e){this.$gridOffset=[t,e]}sides(t){const[,e,s,n,o]=this.id;[e,s,n,o].forEach(t)}get tileId(){return this.id[0]}get topId(){return this.id[1]}get rightId(){return this.id[2]}get bottomId(){return this.id[3]}get leftId(){return this.id[4]}from(t){return this.id=t.id,this.comment=t.comment||null,this.layers=t.layers.map(t=>(new ot).from(t)),this}json(){return{id:this.id,comment:this.comment||null,layers:this.layers.map(t=>t.id)}}}function lt(t,e){let s;function n(t){s.next(t)}function o(t){s.error(t)}const i={subscribe:i=>(s=i,t&&n(t),e&&o(e),{unsubscribe:()=>{}})};return{next:n,error:o,complete:function(){s.complete()},observable:i}}function dt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class ht{constructor(){dt(this,"id",0),dt(this,"message",""),dt(this,"seconds",0),dt(this,"variant",""),dt(this,"dismissable",!0)}from(t){return this.id=t.id,this.message=t.message,this.seconds=t.seconds,this.variant=t.variant,this.dismissable=t.dismissable,this}}const ut=[],mt=lt([],void 0);function ct(t){return mt.observable}let pt=0;function gt(t){return t.id=pt++,ut.push(t),mt.next(ut),t.seconds&&setTimeout(()=>{vt(t.id)},1e3*t.seconds),t.id}function ft(t,e=0){var s=new ht;return s.message=t,s.seconds=e,gt(s)}function bt(t,e=0){var s=new ht;return s.message=t,s.seconds=e,s.variant="error",gt(s)}function yt(t,e=0){var s=new ht;return s.message=t,s.seconds=e,s.variant="loading",s.dismissable=!1,gt(s)}function vt(t){ut.splice(ut.findIndex(e=>e.id===t),1),mt.next(ut)}function wt(t){return new Promise((t,e)=>{const s=ct();if(!s)return e(new Error("Dev: invalid observable"));s.subscribe({next:e=>t(e),error:t=>e(t),complete:t})})}Object(o.register)(wt,(function(t){let e,s;t.dispatchEvent(new o.ValueChangedEvent({data:void 0,error:void 0}));const n={next:e=>t.dispatchEvent(new o.ValueChangedEvent({data:e,error:void 0})),error:e=>t.dispatchEvent(new o.ValueChangedEvent({data:void 0,error:e}))};t.addEventListener("connect",()=>{const t=ct();t&&(e=t.subscribe(n))}),t.addEventListener("disconnect",()=>{e.unsubscribe()}),t.addEventListener("config",t=>{s=t,e&&(e.unsubscribe(),e=void 0);const o=ct();o&&(e=o.subscribe(n))})}));class kt extends n.LightningElement{constructor(...t){super(...t),this.isLoading=!0,this.tile=new at,this.hash="",this.openDeleteComment=!1}get x(){return this.tile.coordinate[0]}get y(){return this.tile.coordinate[1]}renderedCallback(){const[t,e]=this.tile.gridCoordinate||[0,0],s=this.template.host;s.style.setProperty("--column",`${t}`),s.style.setProperty("--row",`${e}`)}handleClick(){console.log(this.tile)}handleDelete(){alert("delete"),console.log("testing")}handleComment(){this.openDeleteComment=!0}cancelDeleteComment(){this.openDeleteComment=!1}confirmDeleteComment(){this.tile.comment="",this.openDeleteComment=!1,ft("Deleted Comment",3)}}Object(n.registerDecorators)(kt,{publicProps:{tile:{config:0},hash:{config:0}},track:{isLoading:1,openDeleteComment:1}});var xt=Object(n.registerComponent)(kt,{tmpl:st});var Ct=[function(t,e,s){return(s?":host{display:flex;grid-column:var(--column,1);grid-row:var(--row,1)}":t+"{display:flex;grid-column:var(--column,1);grid-row:var(--row,1)}")+(s?":host,button"+e+"{width:4rem;height:4rem}":t+",button"+e+"{width:4rem;height:4rem}")+"button"+e+"{padding:0;outline:none;background:rgba(0,0,100,.1);background-clip:content-box;cursor:inherit;color:rgba(0,0,100,.2);border:0}button:hover"+e+"{border-color:#fff;box-shadow:inset 0 0 .5rem rgba(0,0,0,.2);background:rgba(0,0,100,.15);color:rgba(0,0,100,.3)}"}];function Mt(t,e,s,n){const{d:o,t:i,b:r,h:a}=t,{_m0:l}=n;return[a("button",{className:e.computedClass,key:0,on:{click:l||(n._m0=r(e.handleClick))}},[o(e.x),i(", "),o(e.y)])]}var Et=Object(n.registerTemplate)(Mt);Mt.stylesheets=[],Ct&&Mt.stylesheets.push.apply(Mt.stylesheets,Ct),Mt.stylesheetTokens={hostAttribute:"map-addTile-_addTile-host",shadowAttribute:"map-addTile-_addTile"};class Ot extends n.LightningElement{constructor(...t){super(...t),this.tile=null}get x(){return this.tile.coordinate[0]}get y(){return this.tile.coordinate[1]}get computedClass(){return""}renderedCallback(){const[t,e]=this.tile.gridCoordinate||[0,0],s=this.template.host;s.style.setProperty("--column",t),s.style.setProperty("--row",e)}handleClick(){this.dispatchEvent(new CustomEvent("addtile",{detail:{x:this.tile.coordinate[0],y:this.tile.coordinate[1]},bubbles:!0,composed:!0}))}}Object(n.registerDecorators)(Ot,{publicProps:{tile:{config:0}}});var Tt=Object(n.registerComponent)(Ot,{tmpl:Et});var _t=[function(t,e,s){return(s?":host{position:absolute;top:1rem;right:1rem;width:20rem}":t+"{position:absolute;top:1rem;right:1rem;width:20rem}")+"ul"+e+"{list-style:none;margin:0;padding:0}"}];var $t=[function(t,e,s){return"button"+e+"{display:block;width:100%;text-align:left;position:relative;border-radius:.25rem;margin-bottom:.5rem;background:#fff;border:0;padding:1rem;box-shadow:0 1px .5rem rgba(0,0,0,.3);outline:0;cursor:pointer}button:hover"+e+"{box-shadow:0 1px .5rem rgba(0,0,0,.4)}button"+e+" svg"+e+"{fill:#444}button:hover"+e+" svg"+e+"{fill:#1592e6}button:active"+e+"{box-shadow:0 1px .5rem rgba(0,0,0,.5)}button"+e+" svg.loading"+e+"{display:none}span"+e+"{display:block;text-align:left;position:relative;border-radius:.25rem;margin-bottom:.5rem;background:#fff;border:0;padding:1rem;box-shadow:0 1px .5rem rgba(0,0,0,.3);outline:0}span.variant-loading"+e+"{padding-left:2.75rem}span.variant-loading"+e+" svg.loading"+e+"{fill:#1592e6}button.variant-loading"+e+" svg.loading"+e+"{display:none}button.variant-error"+e+"{background:#ff6961;color:#fff}button.variant-error"+e+" svg.close"+e+"{fill:#c23b23}button.variant-error:hover"+e+" svg.close"+e+"{fill:#fff}button.variant-warning"+e+"{background:#fdf7c2}button.variant-warning"+e+" svg.close"+e+"{fill:#cec78d}button.variant-warning:hover"+e+" svg.close"+e+"{fill:#444}button.variant-loading"+e+" svg.loading"+e+"{display:initial}button.variant-loading"+e+" svg.close"+e+"{display:none}button.seconds-1"+e+",button.seconds-2"+e+",button.seconds-3"+e+",button.seconds-4"+e+",button.seconds-5"+e+"{margin-bottom:1.25rem}button.seconds-1"+e+":after,button.seconds-2"+e+":after,button.seconds-3"+e+":after,button.seconds-4"+e+":after,button.seconds-5"+e+':after{content:" ";position:absolute;background:rgba(21,146,230,.5);height:.25rem;width:2rem;left:0;bottom:0;overflow:hidden}button.seconds-1'+e+":after{animation:a 1s linear}button.seconds-2"+e+":after{animation:a 2s linear}button.seconds-3"+e+":after{animation:a 3s linear}button.seconds-4"+e+":after{animation:a 4s linear}button.seconds-5"+e+":after{animation:a 5s linear}svg.close"+e+"{right:.5rem}svg.close"+e+",svg.loading"+e+"{position:absolute;width:1.5rem;height:1.5rem;top:.75rem}svg.loading"+e+"{left:.75rem;animation:b 2s infinite linear}@keyframes a{0%{width:0}to{width:20rem}}@keyframes b{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}"}];function Lt(t,e,s,n){const{h:o,d:i,b:r}=t,{_m0:a}=n;return[e.dismissable?o("button",{className:e.computedClass,attrs:{"data-id":e.toast.id},key:4,on:{click:a||(n._m0=r(e.handleClick))}},[o("svg",{classMap:{loading:!0},attrs:{viewBox:"0 0 24 24"},key:1},[o("path",{attrs:{d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"},key:0},[])]),i(e.toast.message),o("svg",{classMap:{close:!0},attrs:{viewBox:"0 0 24 24"},key:3},[o("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},key:2},[])])]):null,e.dismissable?null:o("span",{className:e.computedClass,key:7},[o("svg",{classMap:{loading:!0},attrs:{viewBox:"0 0 24 24"},key:6},[o("path",{attrs:{d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"},key:5},[])]),i(e.toast.message)])]}var jt=Object(n.registerTemplate)(Lt);Lt.stylesheets=[],$t&&Lt.stylesheets.push.apply(Lt.stylesheets,$t),Lt.stylesheetTokens={hostAttribute:"map-toastItem-_toastItem-host",shadowAttribute:"map-toastItem-_toastItem"};class Dt extends n.LightningElement{constructor(...t){super(...t),this.toast=void 0}get computedClass(){var t=[`variant-${this.toast.variant}`];return this.toast.seconds>0&&t.push(`seconds-${this.toast.seconds}`),t.join(" ")}get dismissable(){return this.toast.dismissable}handleClick(t){vt(parseInt(t.target.dataset.id))}}Object(n.registerDecorators)(Dt,{publicProps:{toast:{config:0}}});var At=Object(n.registerComponent)(Dt,{tmpl:jt});function St(t,e,s,n){const{c:o,k:i,h:r,i:a}=t;return[r("ul",{key:2},a(e.toasts,(function(t){return r("li",{key:i(1,t.id)},[o("map-toast-item",At,{props:{toast:t},key:0},[])])})))]}var Pt=Object(n.registerTemplate)(St);St.stylesheets=[],_t&&St.stylesheets.push.apply(St.stylesheets,_t),St.stylesheetTokens={hostAttribute:"map-toast-_toast-host",shadowAttribute:"map-toast-_toast"};class It extends n.LightningElement{constructor(...t){super(...t),this.toastWire=void 0}get toasts(){return this.toastWire.data}}Object(n.registerDecorators)(It,{wire:{toastWire:{adapter:wt}}});var Bt=Object(n.registerComponent)(It,{tmpl:Pt});var Ft=[function(t,e,s){return s?":host{display:inline-block;margin-right:1px}":t+"{display:inline-block;margin-right:1px}"}];function Ht(t,e,s,n){const{b:o,s:i}=t,{_m0:r}=n;return[i("",{key:0,on:{slotchange:r||(n._m0=o(e.handleSlotChange))}},[],s)]}var Xt=Object(n.registerTemplate)(Ht);Ht.slots=[""],Ht.stylesheets=[],Ft&&Ht.stylesheets.push.apply(Ht.stylesheets,Ft),Ht.stylesheetTokens={hostAttribute:"map-buttonGroup-_buttonGroup-host",shadowAttribute:"map-buttonGroup-_buttonGroup"};class Yt extends n.LightningElement{constructor(...t){super(...t),this.variant="default"}get computedClass(){return`variant-${this.variant}`}handleSlotChange(t){this.template.childNodes[1].assignedElements().forEach(t=>{t.dispatchEvent(new CustomEvent("slot",{detail:{component:"buttonGroup",name:null,variant:this.variant}}))})}}Object(n.registerDecorators)(Yt,{publicProps:{variant:{config:0}}});var Nt=Object(n.registerComponent)(Yt,{tmpl:Xt});var Rt=[function(t,e,s){return(s?":host{display:inline-block}":t+"{display:inline-block}")+".opened"+e+"{display:block}.closed"+e+"{display:inline-block}"}];function Gt(t,e,s,n){const{b:o,s:i}=t,{_m0:r,_m1:a}=n;return[i("",{key:0,on:{slotchange:r||(n._m0=o(e.handleSlotChange))}},[],s),e.isOpen?i("menu",{attrs:{name:"menu"},key:1,on:{slotchange:a||(n._m1=o(e.handleMenuSlotChange))}},[],s):null]}var Ut=Object(n.registerTemplate)(Gt);Gt.slots=["","menu"],Gt.stylesheets=[],Rt&&Gt.stylesheets.push.apply(Gt.stylesheets,Rt),Gt.stylesheetTokens={hostAttribute:"map-dropdown-_dropdown-host",shadowAttribute:"map-dropdown-_dropdown"};class Wt extends n.LightningElement{constructor(){super(),this.$menu=null,this.$menuFocus=!1,this.$menuButton=null,this.isOpen=!1,this.contextMenuHandler=this.handleContextMenu.bind(this),this.mouseDownHandler=this.handleMouseDown.bind(this),this.mouseEnterMenuHandler=this.handleMouseEnterMenu.bind(this),this.mouseLeaveMenuHandler=this.handleMouseLeaveMenu.bind(this)}handleContextMenu(t){this.isOpen&&this.$menuFocus?this.isOpen=!1:this.isOpen=!0}handleMouseDown(t){this.$menuFocus||(this.isOpen=!1,document.removeEventListener("mousedown",this.mouseDownHandler))}handleSlotChange(t){const e=this.template.childNodes[1].assignedElements()[0];e.addEventListener("click",this.contextMenuHandler),e.addEventListener("mouseenter",this.mouseEnterMenuHandler),e.addEventListener("mouseleave",this.mouseLeaveMenuHandler),this.$menuButton=e}handleMenuSlotChange(t){const e=this.template.childNodes[2];if(e){console.log("menu slot changed");const t=e.assignedElements();if(0===t.length)throw new Error("contextMenu missing menu slot.");if(t.length>1)throw new Error("contextMenu must only contain one root element in the menu slot.");const s=t[0];document.addEventListener("mousedown",this.mouseDownHandler),new g.a(this.$menuButton,s,{placement:"bottom-start",modifiers:{computeStyle:{gpuAcceleration:!1}}}),s.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),s.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),s.addEventListener("click",this.handleMouseClick.bind(this)),this.$menu=s}}handleMouseEnter(){this.$menuFocus=!0}handleMouseLeave(){this.$menuFocus=!1}handleMouseClick(){this.isOpen=!1,document.removeEventListener("mousedown",this.mouseDownHandler)}handleMouseEnterMenu(){this.$menuFocus=!0}handleMouseLeaveMenu(){this.$menuFocus=!1}}Object(n.registerDecorators)(Wt,{track:{isOpen:1},fields:["$menu","$menuFocus","$menuButton"]});var Vt=Object(n.registerComponent)(Wt,{tmpl:Ut});var qt=[function(t,e,s){return s?":host{position:fixed;bottom:0;right:0}":t+"{position:fixed;bottom:0;right:0}"}];function zt(t,e,s,n){const{t:o,h:i}=t;return[i("div",{key:0},[o("Testing")]),i("div",{key:1},[o("Details")])]}var Jt=Object(n.registerTemplate)(zt);zt.stylesheets=[],qt&&zt.stylesheets.push.apply(zt.stylesheets,qt),zt.stylesheetTokens={hostAttribute:"map-details-_details-host",shadowAttribute:"map-details-_details"};class Zt extends n.LightningElement{constructor(...t){super(...t),this.name=null,this.author=null}}Object(n.registerDecorators)(Zt,{publicProps:{name:{config:0},author:{config:0}}});var Kt=Object(n.registerComponent)(Zt,{tmpl:Jt});function Qt(t,e,s,n){const{k:o,c:i,i:r,f:a,t:l,h:d,b:u,d:m}=t,{_m0:c,_m1:p,_m2:g,_m3:f,_m4:y,_m5:v,_m6:w,_m7:x}=n;return[i("map-world",h,{props:{world:e.world,hash:e.world.hash},key:2},a([r(e.world.tiles,(function(t){return i("map-tile",xt,{props:{tile:t,hash:t.hash},key:o(0,t.tileId)},[])})),r(e.world.addTiles,(function(t){return i("map-add-tile",Tt,{props:{tile:t},key:o(1,t.id)},[])}))])),e.tileId?null:i("map-modal",A,{key:7},[d("h1",{key:3},[l("Load Map")]),d("p",{key:4},[l("Select Map Modal Here")]),i("map-button",Q,{key:6,on:{click:c||(n._m0=u(e.loadMap))}},[i("map-icon",q,{attrs:{slot:"left"},props:{path:e.mdiScript},key:5},[]),l("Load Mock Map")])]),i("map-toast",Bt,{key:8},[]),d("section",{key:16},[d("h2",{key:9},[l("Buttons")]),i("map-button",Q,{key:11,on:{click:p||(n._m1=u(e.fireToast))}},[i("map-icon",q,{attrs:{slot:"left"},props:{path:e.mdiMessageText},key:10},[]),l("Fire Toast")]),l(" "),i("map-button",Q,{props:{variant:"primary"},key:13,on:{click:g||(n._m2=u(e.fireToast3))}},[i("map-icon",q,{attrs:{slot:"left"},props:{path:e.mdiMessageText},key:12},[]),l("Fire Toast 3 Seconds")]),l(" "),i("map-button",Q,{props:{variant:"primary"},key:15,on:{click:f||(n._m3=u(e.fireToast3))}},[i("map-icon",q,{props:{path:e.mdiMessageText},key:14},[])])]),d("section",{key:21},[d("h2",{key:17},[l("Button Group")]),i("map-button-group",Nt,{key:20},[i("map-button",Q,{key:18,on:{click:y||(n._m4=u(e.fireErrorToast))}},[l("Fire Error Toast")]),i("map-button",Q,{key:19,on:{click:v||(n._m5=u(e.fireWarningToast))}},[l("Fire Warning Toast")])])]),d("section",{key:34},[d("h2",{key:22},[l("Button Menu")]),i("map-dropdown",Vt,{key:27},[i("map-button",Q,{key:23},[l("Menu")]),i("map-menu",k,{attrs:{slot:"menu"},key:26},[i("map-menu-item",E,{key:24},[l("Option 1")]),i("map-menu-item",E,{key:25},[l("Option 2")])])]),l(" "),i("map-dropdown",Vt,{key:33},[i("map-button",Q,{props:{variant:"primary"},key:29},[i("map-icon",q,{props:{path:e.mdiMessageText},key:28},[])]),i("map-menu",k,{attrs:{slot:"menu"},key:32},[i("map-menu-item",E,{key:30},[l("Option 1")]),i("map-menu-item",E,{key:31},[l("Option 2")])])])]),d("section",{key:43},[d("h2",{key:35},[l("Context Menu")]),d("p",{key:36},[l("Right click the button below.")]),i("map-context-menu",b,{key:42},[d("button",{key:37},[l("Right Click Me")]),i("map-menu",k,{attrs:{slot:"menu"},key:41},[i("map-menu-item",E,{key:38},[l("Fake Option 1")]),i("map-menu-item",E,{key:39},[l("Fake Option 2")]),i("map-menu-item",E,{key:40},[l("Fake Option 3")])])])]),d("section",{key:48},[d("h2",{key:44},[l("Load Map")]),i("map-button",Q,{key:46,on:{click:w||(n._m6=u(e.loadMap))}},[i("map-icon",q,{attrs:{slot:"left"},props:{path:e.mdiScript},key:45},[]),l("Load Mock Map")]),i("map-button",Q,{key:47,on:{click:x||(n._m7=u(e.loadMap2))}},[l("Load Mock Error")])]),i("map-details",Kt,{props:{name:"Foo"},key:49},[]),d("section",{key:51},[d("h2",{key:50},[l("Map Data ("),m(e.tileCount),l(")")]),m(e.data)])]}var te=Object(n.registerTemplate)(Qt);function ee(t){if(!(t&&"id"in t))return;const e=lt(void 0,void 0);return null!==t.id&&fetch(`mock/mock.${t.id}.json`).then(t=>t.json()).then(t=>{console.log(t),e.next(t)},()=>{e.error({message:"Failed to load map."})}),e.observable}function se(t){return new Promise((e,s)=>{const n=ee(t);if(!n)return s(new Error("Dev: id required"));n.subscribe({next:t=>e(t),error:t=>s(t),complete:e})})}function ne(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}Qt.stylesheets=[],i&&Qt.stylesheets.push.apply(Qt.stylesheets,i),Qt.stylesheetTokens={hostAttribute:"map-app-_app-host",shadowAttribute:"map-app-_app"},Object(o.register)(se,(function(t){let e,s;t.dispatchEvent(new o.ValueChangedEvent({data:void 0,error:void 0}));const n={next:e=>t.dispatchEvent(new o.ValueChangedEvent({data:e,error:void 0})),error:e=>t.dispatchEvent(new o.ValueChangedEvent({data:void 0,error:e}))};t.addEventListener("connect",()=>{const t=ee(s);t&&(e=t.subscribe(n))}),t.addEventListener("disconnect",()=>{e.unsubscribe()}),t.addEventListener("config",t=>{s=t,e&&(e.unsubscribe(),e=void 0);const o=ee(s);o&&(e=o.subscribe(n))})}));class oe{constructor(){ne(this,"id",0),ne(this,"coordinate",[0,0]),ne(this,"gridCoordinate",[0,0])}get gridX(){return this.gridCoordinate[0]}get gridY(){return this.gridCoordinate[1]}}function ie(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class re{constructor(){ie(this,"id",""),ie(this,"name",""),ie(this,"description",""),ie(this,"author",""),ie(this,"tiles",[]),ie(this,"$tileCount",0)}get tileCount(){return this.$tileCount||this.tiles.length}set tileCount(t){this.$tileCount=t}get hash(){return`${this.width}, ${this.height}`}get addTiles(){if(0===this.tiles.length)return[];const t=[];this.iterateTiles(this.tiles[0],(e,s)=>{e.sides((e,n)=>{if(null===e){const e=this.getSideCoordinate(s,n);t.push(e)}})});const[e,s]=this.gridOffset;return t.filter(this.uniqueCoordinates).map((t,n)=>{const o=new oe;return o.id=n,o.coordinate=t,o.gridCoordinate=[t[0]+e,t[1]+s],o})}uniqueCoordinates(t,e,s){return s.findIndex(e=>e[0]===t[0]&&e[1]===t[1])===e}min(t){return t.reduce((function(t,e){return Math.min(t,e)}))}max(t){return t.reduce((function(t,e){return Math.max(t,e)}))}get gridOffset(){return[Math.abs(this.min(this.tiles.map(t=>t.x)))+2,Math.abs(this.min(this.tiles.map(t=>t.y)))+2]}get minX(){return this.min(this.tiles.map(t=>t.x))}get maxX(){return this.max(this.tiles.map(t=>t.x))}get minY(){return this.min(this.tiles.map(t=>t.y))}get maxY(){return this.max(this.tiles.map(t=>t.y))}get width(){return 0===this.tiles.length?3:this.max(this.tiles.map(t=>t.x))-this.min(this.tiles.map(t=>t.x))+2}get height(){return 0===this.tiles.length?3:this.max(this.tiles.map(t=>t.y))-this.min(this.tiles.map(t=>t.y))+2}from(t){if(null===t)return this;if(this.id=t.id,this.name=t.name,this.description=t.description,this.author=t.author,t.tiles){this.tiles=t.tiles.map(t=>(new at).from(t)),this.iterateTiles(this.tiles[0],(t,[e,s])=>{t.setCoordinate(e,s)});const[e,s]=this.gridOffset;this.tiles.forEach(t=>{t.setGridOffset(e,s)})}return t.tileCount&&(this.tileCount=t.tileCount),this}json(){return{id:this.id,name:this.name,description:this.description,author:this.author,tiles:this.tiles.map(t=>t.json())}}getTile(t,e){return this.tiles.find(s=>s.coordinate[0]===t&&s.coordinate[1]===e)||null}getSidesByCoordinate(t,e){return[this.getTile(t,e-1),this.getTile(t+1,e),this.getTile(t,e+1),this.getTile(t-1,e)]}getSideCoordinate([t,e],s){switch(s){case 0:return[t,e-1];case 1:return[t+1,e];case 2:return[t,e+1];case 3:return[t-1,e]}throw new Error("Invalid side")}getSides(t){return[this.tiles.find(e=>e.id[0]===t.id[1])||null,this.tiles.find(e=>e.id[0]===t.id[2])||null,this.tiles.find(e=>e.id[0]===t.id[3])||null,this.tiles.find(e=>e.id[0]===t.id[4])||null]}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}addTile(t,e,s){var n=this.getSidesByCoordinate(t,e),o=this.uuidv4();const i=new at;i.setCoordinate(t,e);const r=[...n.map(t=>t?t.id[0]:null)];i.id=[o,r[0],r[1],r[2],r[3]],i.layers=s||[(new ot).from("paper-tan"),(new ot).from("tile-lines-1")],this.tiles.push(i),n[0]&&(n[0].id[3]=o),n[1]&&(n[1].id[4]=o),n[2]&&(n[2].id[1]=o),n[3]&&(n[3].id[2]=o);const[a,l]=this.gridOffset;this.tiles.forEach(t=>t.setGridOffset(a,l))}removeTile(t){var e=this.getSides(t);this.tiles.splice(this.tiles.findIndex(e=>e.id[0]===t.id[0]),1),e[0]&&(e[0].id[3]=null),e[1]&&(e[1].id[4]=null),e[2]&&(e[2].id[1]=null),e[3]&&(e[3].id[2]=null)}canRemove(t){return 1!==this.tiles.length&&this.getSides(t).map(e=>{if(e){var s=0;return this.iterateTiles(e,()=>s++,[t]),s}return null}).filter(t=>null!==t).every(t=>t===this.tiles.length-1)}iterateTiles(t,e,s=[]){const n=(t,s,[o,i])=>{t.splice(t.findIndex(t=>t.id[0]===s.id[0]),1)[0],e(s,[o,i]);var[,r,a,l,d]=s.id;[r,a,l,d].forEach((e,s)=>{if(null!==e){var r=t.find(t=>t.id[0]===e);if(r){const e=this.getSideCoordinate([o,i],s);n(t,r,e)}}})};var o=[...this.tiles];if(s){var i=s.map(t=>t.id[0]);o=o.filter(t=>!i.includes(t.id[0]))}n(o,t,[0,0])}getCollision(t,e){var s=t.collision,n=[1===s||3===s||5===s||7===s||9===s||11===s||13===s||15===s?1:0,2===s||3===s||6===s||7===s||10===s||11===s||14===s||15===s?1:0,4===s||5===s||6===s||7===s||12===s||13===s||14===s||15===s?1:0,8===s||9===s||10===s||11===s||12===s||13===s||14===s||15===s?1:0];return n[e]=0===n[e]?1:0,1*n[0]+2*n[1]+4*n[2]+8*n[3]}}class ae extends n.LightningElement{constructor(...t){super(...t),this.tile={complex:"object"},this.tileId=null,this.tileCount=0,this.world=new re,this.mdiAccount=Z.a,this.mdiMessageText=Z.d,this.mdiScript=Z.e}function({error:t,data:e}){e&&(this.world=(new re).from(e),console.log(this.world.addTiles),vt(this.loadingToastId)),t&&(this.world=new re,this.tileId=null,bt("Failed to load map!",5e3),vt(this.loadingToastId))}connectedCallback(){this.addEventListener("addtile",this.addTile.bind(this))}addTile(t){const{x:e,y:s}=t.detail;this.world.addTile(e,s,null),this.tileCount=this.world.tileCount}get data(){return JSON.stringify(this.world.json())}loadMap(){this.tileId="world",this.loadingToastId=yt("Loading Map...")}loadMap2(){this.tileId="world1",this.loadingToastId=yt("Loading Map...")}fireToast(){ft("Toast Message")}fireToast3(){ft("Toast Message 3 seconds",3)}fireErrorToast(){bt("Toast Error Message")}fireWarningToast(){!function(t,e=0){var s=new ht;s.message=t,s.seconds=e,s.variant="warning",gt(s)}("Toast Warning Message")}}Object(n.registerDecorators)(ae,{wire:{function:{adapter:se,params:{id:"tileId"},static:{},method:1}},track:{tile:1,tileId:1,tileCount:1,world:1,mdiAccount:1,mdiMessageText:1,mdiScript:1}});var le=Object(n.registerComponent)(ae,{tmpl:te});Object(o.registerWireService)(n.register),customElements.define("map-app",Object(n.buildCustomElementConstructor)(le))}});